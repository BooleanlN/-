-- 事件表
create sequence ID_PRIMARY_SEQUENCE
MINVALUE 1
NOMAXVALUE
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;

CREATE OR REPLACE TRIGGER FAULT_EVENT_ID_TRIGGER BEFORE INSERT ON fault FOR EACH ROW WHEN(NEW.FAULT_ID IS NULL)
BEGIN
  SELECT  ID_PRIMARY_SEQUENCE.NEXTVAL into:NEW.FAULT_ID FROM dual;
END;

-- 用户
create sequence ID_PRIMARY_SEQUENCE_USER
MINVALUE 1
NOMAXVALUE
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE;
CREATE OR REPLACE TRIGGER USER_ID_TRIGGER BEFORE INSERT ON "user" FOR EACH ROW WHEN(NEW.ID IS NULL)
BEGIN
  SELECT  ID_PRIMARY_SEQUENCE_USER.NEXTVAL into:NEW.ID FROM dual;
END;

--低电量用户
create sequence ID_PRIMARY_SEQUENCE_USER_POWER
MINVALUE 1
NOMAXVALUE
START WITH 1
INCREMENT BY 1
NOCYCLE
NOCACHE; 
CREATE OR REPLACE TRIGGER LOW_POWER_USER_ID_TRIGGER BEFORE INSERT ON LOW_POWER_USER FOR EACH ROW WHEN(NEW.LOW_POWER_USER_ID IS NULL)
BEGIN
  SELECT  ID_PRIMARY_SEQUENCE_USER_POWER.NEXTVAL into:NEW.LOW_POWER_USER_ID FROM dual;
END;